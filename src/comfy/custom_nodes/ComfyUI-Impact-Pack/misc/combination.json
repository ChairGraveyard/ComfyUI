{
  "last_node_id": 115,
  "last_link_id": 282,
  "nodes": [
    {
      "id": 82,
      "type": "MMDetLoader",
      "pos": [
        712.5367020996093,
        135.30448647521965
      ],
      "size": {
        "0": 374.412109375,
        "1": 93.55003356933594
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {
          "name": "BBOX_MODEL",
          "type": "BBOX_MODEL",
          "links": [
            204
          ],
          "slot_index": 0
        },
        {
          "name": "SEGM_MODEL",
          "type": "SEGM_MODEL",
          "links": [],
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "MMDetLoader"
      },
      "widgets_values": [
        "bbox/mmdet_anime-face_yolov3.pth"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 87,
      "type": "SAMLoader",
      "pos": [
        1109.9366837890623,
        134.3044807531738
      ],
      "size": {
        "0": 327.3000183105469,
        "1": 96.49998474121094
      },
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [
        {
          "name": "SAM_MODEL",
          "type": "SAM_MODEL",
          "links": [
            282
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SAMLoader"
      },
      "widgets_values": [
        "sam_vit_b_01ec64.pth"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 94,
      "type": "Reroute",
      "pos": [
        62,
        456
      ],
      "size": [
        82,
        26
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 274
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            218,
            219
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 103,
      "type": "Reroute",
      "pos": [
        1409.5367020996096,
        263.3044864752197
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 239
        }
      ],
      "outputs": [
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": [
            246
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 104,
      "type": "Segs & Mask",
      "pos": [
        1529.9366837890627,
        285.3044807531738
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "segs",
          "type": "SEGS",
          "link": 246
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 247
        }
      ],
      "outputs": [
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": [
            275
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Segs & Mask"
      },
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 106,
      "type": "Reroute",
      "pos": [
        872.6135858068355,
        491.7605277234375
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 252
        }
      ],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            278
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 105,
      "type": "CheckpointLoaderSimple",
      "pos": [
        21,
        619
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 2,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            268,
            276
          ],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            260,
            261
          ],
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            252,
            267
          ],
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "V07_v07.safetensors"
      ]
    },
    {
      "id": 112,
      "type": "EmptyLatentImage",
      "pos": [
        21,
        1065
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            266
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        768,
        512,
        1
      ]
    },
    {
      "id": 108,
      "type": "VAEDecode",
      "pos": [
        360,
        1123
      ],
      "size": {
        "0": 381.7952880859375,
        "1": 46.58692932128906
      },
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 272
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 267
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            273,
            274,
            277
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 110,
      "type": "CLIPTextEncode",
      "pos": [
        362,
        866
      ],
      "size": {
        "0": 381.7952880859375,
        "1": 213.58692932128906
      },
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 261
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            265,
            280
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "nsfw, paintings, sketches, (worst quality:2), (low quality:2), (normal quality:2), lowres, ((monochrome)), ((grayscale)), bad anatomy, Deep Negative, (fat:1.2), facing away, looking away, tilted head, lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, username, blurry, bad feet, cropped, poorly drawn hands, poorly drawn face, mutation, deformed, jpeg artifacts, signature, watermark, extra fingers, fewer digits, extra limbs, extra arms, extra legs, malformed limbs, fused fingers, too many fingers, long neck, cross-eyed, mutated hands, bad body, bad proportions, missing fingers, missing arms, missing legs, extra digit, badhandv4, EasyNegative, NG_DeepNegative_V1_75T, leather, ((solo))"
      ]
    },
    {
      "id": 109,
      "type": "CLIPTextEncode",
      "pos": [
        359,
        620
      ],
      "size": {
        "0": 382,
        "1": 204
      },
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 260
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            264,
            279
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "masterpiece, photorealistic:1.4, short break hair, (yellow check short jacket), white shirts, light pink necktie, (pink school check skirt), cute girl, sneakers, detailed eyes, realistic, 2girls, ultra detailed, beautiful girl, beautiful-detailed eyes, slender, small breast, smile, from top, luminous skin, stocking,"
      ]
    },
    {
      "id": 107,
      "type": "SaveImage",
      "pos": [
        752,
        620
      ],
      "size": {
        "0": 703.5068359375,
        "1": 549.9654541015625
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 273
        }
      ],
      "title": "Prompt",
      "properties": {},
      "widgets_values": [
        "original"
      ]
    },
    {
      "id": 115,
      "type": "SaveImage",
      "pos": [
        1484,
        615
      ],
      "size": {
        "0": 708.5068359375,
        "1": 555.9654541015625
      },
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 281
        }
      ],
      "title": "Refined",
      "properties": {},
      "widgets_values": [
        "refined"
      ]
    },
    {
      "id": 111,
      "type": "KSampler",
      "pos": [
        20,
        762
      ],
      "size": {
        "0": 315,
        "1": 262
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 268
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 264
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 265
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 266
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            272
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        832707305495685,
        "fixed",
        20,
        7,
        "euler",
        "karras",
        1
      ]
    },
    {
      "id": 90,
      "type": "BboxDetectorForEach",
      "pos": [
        712.9366837890625,
        293.3044807531738
      ],
      "size": {
        "0": 251.412109375,
        "1": 126
      },
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "bbox_model",
          "type": "BBOX_MODEL",
          "link": 204
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 218
        }
      ],
      "outputs": [
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": [
            208,
            239
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "BboxDetectorForEach"
      },
      "widgets_values": [
        0.5,
        20,
        3
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 114,
      "type": "DetailerForEach",
      "pos": [
        2203,
        614
      ],
      "size": {
        "0": 315,
        "1": 418
      },
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 277
        },
        {
          "name": "segs",
          "type": "SEGS",
          "link": 275
        },
        {
          "name": "model",
          "type": "MODEL",
          "link": 276
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 278
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 279
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 280
        },
        {
          "name": "external_seed",
          "type": "SEED",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            281
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "DetailerForEach"
      },
      "widgets_values": [
        256,
        "bbox",
        1041366330963730,
        "randomize",
        20,
        7,
        "euler",
        "karras",
        0.6,
        5,
        "disabled"
      ]
    },
    {
      "id": 91,
      "type": "SAMDetectorCombined",
      "pos": [
        1112.0510126953125,
        289
      ],
      "size": {
        "0": 234.59999084472656,
        "1": 146
      },
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "sam_model",
          "type": "SAM_MODEL",
          "link": 282
        },
        {
          "name": "segs",
          "type": "SEGS",
          "link": 208
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 219
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            247
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SAMDetectorCombined"
      },
      "widgets_values": [
        "rect-4",
        10,
        0.9
      ],
      "color": "#232",
      "bgcolor": "#353"
    }
  ],
  "links": [
    [
      204,
      82,
      0,
      90,
      0,
      "BBOX_MODEL"
    ],
    [
      208,
      90,
      0,
      91,
      1,
      "SEGS"
    ],
    [
      218,
      94,
      0,
      90,
      1,
      "IMAGE"
    ],
    [
      219,
      94,
      0,
      91,
      2,
      "IMAGE"
    ],
    [
      239,
      90,
      0,
      103,
      0,
      "*"
    ],
    [
      246,
      103,
      0,
      104,
      0,
      "SEGS"
    ],
    [
      247,
      91,
      0,
      104,
      1,
      "MASK"
    ],
    [
      252,
      105,
      2,
      106,
      0,
      "*"
    ],
    [
      260,
      105,
      1,
      109,
      0,
      "CLIP"
    ],
    [
      261,
      105,
      1,
      110,
      0,
      "CLIP"
    ],
    [
      264,
      109,
      0,
      111,
      1,
      "CONDITIONING"
    ],
    [
      265,
      110,
      0,
      111,
      2,
      "CONDITIONING"
    ],
    [
      266,
      112,
      0,
      111,
      3,
      "LATENT"
    ],
    [
      267,
      105,
      2,
      108,
      1,
      "VAE"
    ],
    [
      268,
      105,
      0,
      111,
      0,
      "MODEL"
    ],
    [
      272,
      111,
      0,
      108,
      0,
      "LATENT"
    ],
    [
      273,
      108,
      0,
      107,
      0,
      "IMAGE"
    ],
    [
      274,
      108,
      0,
      94,
      0,
      "*"
    ],
    [
      275,
      104,
      0,
      114,
      1,
      "SEGS"
    ],
    [
      276,
      105,
      0,
      114,
      2,
      "MODEL"
    ],
    [
      277,
      108,
      0,
      114,
      0,
      "IMAGE"
    ],
    [
      278,
      106,
      0,
      114,
      3,
      "VAE"
    ],
    [
      279,
      109,
      0,
      114,
      4,
      "CONDITIONING"
    ],
    [
      280,
      110,
      0,
      114,
      5,
      "CONDITIONING"
    ],
    [
      281,
      114,
      0,
      115,
      0,
      "IMAGE"
    ],
    [
      282,
      87,
      0,
      91,
      0,
      "SAM_MODEL"
    ]
  ],
  "groups": [
    {
      "title": "Detection & Mask Generation",
      "bounding": [
        664,
        13,
        1190,
        447
      ],
      "color": "#3f789e"
    },
    {
      "title": "Group",
      "bounding": [
        11,
        496,
        1462,
        753
      ],
      "color": "#3f789e"
    },
    {
      "title": "Refine and Render",
      "bounding": [
        1476,
        495,
        1057,
        753
      ],
      "color": "#3f789e"
    }
  ],
  "config": {},
  "extra": {},
  "version": 0.4
}